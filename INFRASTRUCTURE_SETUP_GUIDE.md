# üöÄ LANGFLIX INFRASTRUCTURE SETUP GUIDE
## Agent 1: Infrastructure Engineer - Complete Setup

**Status:** In Progress - Database Connected, Services Need Configuration  
**Time Required:** 3-4 hours of focused work  
**Blocks:** Agent 2 (Day 3), Agent 4 (Day 2), Agent 5 (Day 5)

---

## ‚úÖ COMPLETED SETUP

### Database Schema
- [x] Prisma schema validated and fixed (removed duplicate ReviewSession model)
- [x] Prisma client generated successfully
- [x] Database connection working (SQLite for local dev)

### Environment Configuration
- [x] .env file configured with required secrets
- [x] JWT_SECRET and SESSION_SECRET provided
- [x] Server configuration complete

---

## üîß REQUIRED EXTERNAL SERVICE SETUP

### 1. Neon PostgreSQL Database (CRITICAL - 30 minutes)

**Why:** Production requires PostgreSQL for scalability and features  
**Current Status:** Using SQLite for local development  

**Setup Steps:**
1. Go to https://console.neon.tech/
2. Create account and new project "langflix-mvp"
3. Copy the connection string
4. Update .env file:
   ```bash
   DATABASE_URL="postgresql://user:pass@host/db?sslmode=require"
   DIRECT_DATABASE_URL="postgresql://user:pass@host/db?sslmode=require"
   ```
5. Run migrations: `npx prisma db push`

### 2. Supabase Authentication (CRITICAL - 20 minutes)

**Why:** Required for user authentication and RLS policies  
**Current Status:** Not configured  

**Setup Steps:**
1. Go to https://supabase.com/dashboard
2. Create new project "langflix-auth"
3. Get credentials from Settings > API
4. Update .env file:
   ```bash
   SUPABASE_URL="https://your-project.supabase.co"
   SUPABASE_ANON_KEY="your-anon-key"
   SUPABASE_SERVICE_ROLE_KEY="your-service-role-key"
   ```

### 3. OpenAI API (CRITICAL - 15 minutes)

**Why:** Required for AI features (conversation partner, content generation)  
**Current Status:** Not configured  

**Setup Steps:**
1. Go to https://platform.openai.com/api-keys
2. Create new API key
3. Add $50 credit (REQUIRED for testing)
4. Update .env file:
   ```bash
   OPENAI_API_KEY="sk-proj-your-key-here"
   ```

### 4. Stripe Payments (REQUIRED - 20 minutes)

**Why:** Required for premium features and payments  
**Current Status:** Not configured  

**Setup Steps:**
1. Go to https://dashboard.stripe.com/
2. Create account and get test keys
3. Update .env file:
   ```bash
   STRIPE_SECRET_KEY="sk_test_your-key"
   STRIPE_PUBLISHABLE_KEY="pk_test_your-key"
   ```

---

## üß™ VERIFICATION STEPS

After completing external service setup:

```bash
# 1. Verify environment
npm run setup:check

# 2. Start server
npm run start:server

# 3. Test endpoints
curl http://localhost:3001/api/health
```

**Success Criteria:**
- ‚úÖ Server starts without errors
- ‚úÖ Database connected and migrated
- ‚úÖ All environment variables configured
- ‚úÖ http://localhost:3001 loads videos

---

## üöÄ DEPLOYMENT READY

Once external services are configured:

### Vercel Deployment (Day 3-4)
1. Connect GitHub repo to Vercel
2. Add all environment variables
3. Deploy to production
4. Test live URL

### CDN Configuration (Day 3-4)
1. Configure video caching
2. Set up global CDN
3. Test video playback from different regions

### CI/CD Pipeline (Day 5-7)
1. GitHub Actions for automated testing
2. Auto-deploy on main branch push
3. Slack notifications on deploy

---

## üìä CURRENT STATUS

### ‚úÖ Working Components
- Database schema (28 models)
- Prisma ORM configured
- Server infrastructure
- Environment validation script
- API endpoints (50+ routes)

### ‚è≥ Pending Setup
- Neon PostgreSQL database
- Supabase authentication
- OpenAI API integration
- Stripe payment processing

### üéØ Next Steps
1. Complete external service setup (1-2 hours)
2. Verify all services working
3. Deploy to production
4. Set up monitoring and backups

---

## üìû SUPPORT

**Documentation:**
- Complete source: `LANGFLIX_SOURCE.md`
- Environment template: `ENV_TEMPLATE.txt`
- API documentation: Check `server.js` route comments

**External Resources:**
- Neon docs: https://neon.tech/docs
- Supabase docs: https://supabase.com/docs
- OpenAI docs: https://platform.openai.com/docs
- Stripe docs: https://stripe.com/docs

---

**Generated by:** Agent 1 Infrastructure Engineer  
**Last Updated:** October 17, 2025  
**Priority:** CRITICAL - Blocks all other agents





