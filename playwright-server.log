ğŸ“¹ Loading video catalog from MULTIPLE sources...
âœ… Loaded 506 MP4 videos from Langfeed
âœ… Loaded 142 videos from public/videos/reels/
ğŸ¬ TOTAL: 648 videos loaded
ğŸ¯ Spanish Frequency Database loaded - 10K+ words organized by CEFR bands
ğŸ¯ Spanish Frequency System loaded - TOP 20 words with viral contexts!
ğŸ”¥ Spanish Gossip Feed loaded - 8 celebrity drama items ready!
ğŸ§  SRS Prisma Adapter initialized - persistent spaced repetition
ğŸ¯ Spanish Frequency Database loaded - 10K+ words organized by CEFR bands
ğŸ”¥ Smart Feed System initialized with frequency targeting
ğŸ§  Personalized SRS Feed System initialized
ğŸ¯ Extended Spanish Frequency System loaded - 1000+ words organized by CEFR levels!
âœ… VideoDifficultyScorer initialized with 10k Spanish words
âš ï¸ Supabase credentials not found in environment variables. Database features will be limited.
   Please set SUPABASE_URL and SUPABASE_ANON_KEY in your .env file.
[dotenv@17.2.3] injecting env (0) from .env -- tip: ğŸ” prevent building .env in docker: https://dotenvx.com/prebuild
ğŸŒ Fast Translation Service initialized
   Providers: Google Translate â†’ DeepL â†’ OpenAI
âœ… Personalization engine loaded
ğŸš€ Unified Feed Algorithm initialized with TikTok mechanics
ğŸ¯ Frequency Lookup loaded: 9997 words indexed
âš ï¸  Mixpanel not configured (MIXPANEL_TOKEN not set)
ğŸ¤– AI Content Adapter initialized with 90/10 theory
ğŸ¯ Level Detection System initialized
ğŸŒ Translation Service initialized
   API URL: https://libretranslate.com
   Rate limit: 5 req/s
ğŸ° Dopamine Engine initialized
ğŸ§ª A/B Testing Engine initialized with 7 experiments
âœ… VideoDifficultyScorer initialized with 10k Spanish words
ğŸ¥ Video Feed API endpoints loaded
ğŸ§  Adaptive Learning API endpoints loaded
âš ï¸  SENTRY_DSN not configured. Error tracking disabled.
ğŸ“¦ Cache system initialized (in-memory)
ğŸ“Š Monitoring & Analytics endpoints loaded
ğŸ“ Beginner Mode API endpoints loaded
ğŸ¤– AI Systems loaded: Content Adapter + Level Detector
ğŸ§  SRS System loaded with SM-2 algorithm
ğŸ† Gamification System loaded: Streaks, XP, Achievements
ğŸ“Š Engagement Tracker loaded: Watch time, Saves, Completions
ğŸ“Š Analytics API loaded: Track, Daily, Weekly, Progress, Interests, Insights
ğŸ¯ Spanish Frequency Database loaded - 10K+ words organized by CEFR bands
ğŸ“° Adaptive News Curator loaded: ChatGPT Pulse + Perplexity style
ğŸ¤– AI Discover Feed API loaded - ChatGPT Pulse style
âœ… Server running on http://localhost:3001
ğŸ“Š Stats Dashboard: http://localhost:3001
ğŸ”Œ API Endpoints:
    GET  /api/health/status       - System health check
    POST /api/analytics           - Track user events
    GET  /api/user/level/:userId
    GET  /api/user/words/:userId
    POST /api/words/learned
    GET  /api/user/stats/:userId
    GET  /api/user/progress/:userId
    
(node:8674) [MODULE_TYPELESS_PACKAGE_JSON] Warning: Module type of file:///Users/mindful/_projects/workspace3/lib/viralContentEngine.js is not specified and it doesn't parse as CommonJS.
Reparsing as ES module because module syntax was detected. This incurs a performance overhead.
To eliminate this warning, add "type": "module" to /Users/mindful/_projects/workspace3/package.json.
(Use `node --trace-warnings ...` to show where the warning was created)
[Queue] Supabase not configured - running in test mode
âœ… Firecrawl integration loaded
Error saving word: PrismaClientKnownRequestError: 
Invalid `prisma.word.update()` invocation in
/Users/mindful/_projects/workspace3/lib/vocabulary-api.js:74:46

  71 }
  72 
  73 try {
â†’ 74     const vocabulary = await prisma.word.update(
An operation failed because it depends on one or more records that were required but not found. No record was found for an update.
    at ei.handleRequestError (/Users/mindful/_projects/workspace3/node_modules/@prisma/client/runtime/library.js:121:7268)
    at ei.handleAndLogRequestError (/Users/mindful/_projects/workspace3/node_modules/@prisma/client/runtime/library.js:121:6593)
    at ei.request (/Users/mindful/_projects/workspace3/node_modules/@prisma/client/runtime/library.js:121:6300)
    at async a (/Users/mindful/_projects/workspace3/node_modules/@prisma/client/runtime/library.js:130:9551)
    at async /Users/mindful/_projects/workspace3/lib/vocabulary-api.js:74:28 {
  code: 'P2025',
  meta: { modelName: 'Word', cause: 'No record was found for an update.' },
  clientVersion: '6.16.3'
}
âœ… User initialized: test-playwright-1760726568200
âœ… Word clicked: "gato" by user test-playwright-1760726568200
âœ… Retrieved 0 words for user test-playwright-1760726571672
ğŸ§ª User guest_1760726569555 assigned to auto_advance: on
ğŸ§ª User guest_1760726569555 assigned to reward_frequency: 5
ğŸ§ª User guest_1760726569555 assigned to article_snap: proximity
ğŸ§ª User guest_1760726569555 assigned to sound_default: off
ğŸ§ª User guest_1760726569555 assigned to celebration_intensity: minimal
ğŸ§ª User guest_1760726569555 assigned to feed_weights: engagement_first
ğŸ§ª User guest_1760726569555 assigned to social_proof_frequency: low
âš ï¸ feed-content-service: videos.json not available, using catalog fallback
âš ï¸ feed-content-service: videos.json not available, using catalog fallback
ğŸ§ª User guest_1760726578746 assigned to auto_advance: on
ğŸ§ª User guest_1760726578746 assigned to reward_frequency: 15
ğŸ§ª User guest_1760726578746 assigned to article_snap: proximity
ğŸ§ª User guest_1760726578746 assigned to sound_default: off
ğŸ§ª User guest_1760726578746 assigned to celebration_intensity: intense
ğŸ§ª User guest_1760726578746 assigned to feed_weights: balanced
ğŸ§ª User guest_1760726578746 assigned to social_proof_frequency: high
âœ… Found 0 words due for review for user test-playwright-1760726567571
Error saving assessment: PrismaClientKnownRequestError: 
Invalid `prisma.user.update()` invocation in
/Users/mindful/_projects/workspace3/lib/assessment-api.js:18:27

  15 
  16 try {
  17     // Update user level
â†’ 18     await prisma.user.update(
An operation failed because it depends on one or more records that were required but not found. No record was found for an update.
    at ei.handleRequestError (/Users/mindful/_projects/workspace3/node_modules/@prisma/client/runtime/library.js:121:7268)
    at ei.handleAndLogRequestError (/Users/mindful/_projects/workspace3/node_modules/@prisma/client/runtime/library.js:121:6593)
    at ei.request (/Users/mindful/_projects/workspace3/node_modules/@prisma/client/runtime/library.js:121:6300)
    at async a (/Users/mindful/_projects/workspace3/node_modules/@prisma/client/runtime/library.js:130:9551)
    at async /Users/mindful/_projects/workspace3/lib/assessment-api.js:18:9 {
  code: 'P2025',
  meta: { modelName: 'User', cause: 'No record was found for an update.' },
  clientVersion: '6.16.3'
}
ğŸ“° Enhanced Articles Feed: category=for-you, level=A2, userId=demo-user
âŒ Enhanced articles feed error: TypeError: FrequencyLookup is not a constructor
    at loadUserProfile (/Users/mindful/_projects/workspace3/api/articles-feed-enhanced.js:199:24)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /Users/mindful/_projects/workspace3/api/articles-feed-enhanced.js:55:29
âš ï¸ feed-content-service: videos.json not available, using catalog fallback
ğŸ§ª User user_1760668352424_cnxthts62 assigned to reward_frequency: 15
ğŸ§ª User user_1760668352424_cnxthts62 assigned to celebration_intensity: intense
ğŸ§ª User user_1760668352424_cnxthts62 assigned to feed_weights: balanced
ğŸ§ª User user_1760668352424_cnxthts62 assigned to social_proof_frequency: high
ğŸ“Š Tracking interaction: complete for user user_1760668352424_cnxthts62
ğŸ“Š Tracking interaction: complete for user user_1760668352424_cnxthts62
âš ï¸ feed-content-service: videos.json not available, using catalog fallback
ğŸ“Š Tracking interaction: complete for user user_1760668352424_cnxthts62
ğŸ“Š Tracking interaction: complete for user user_1760668352424_cnxthts62
